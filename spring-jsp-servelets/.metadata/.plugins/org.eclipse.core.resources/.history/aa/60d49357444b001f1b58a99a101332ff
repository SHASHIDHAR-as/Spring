package com.deloitte.jpaProect;

import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.Persistence;
import java.sql.Date;

public class App1 {
    public static void main(String[] args) {
        EntityManagerFactory emf = Persistence.createEntityManagerFactory("employee");
        EntityManager em = emf.createEntityManager();

        // Create
        em.getTransaction().begin();
        Employee emp1 = new Employee(1, "John Doe", 101, Date.valueOf("1985-01-15"), 50000);
        Employee emp2 = new Employee(2, "Jane Doe", 102, Date.valueOf("1988-02-20"), 55000);
        em.persist(emp1);
        em.persist(emp2);
        em.getTransaction().commit();

        // Read
        Employee foundEmp = em.find(Employee.class, 1);
        System.out.println("Read: " + foundEmp);

        // Update
        em.getTransaction().begin();
        foundEmp.setSalary(60000);
        em.getTransaction().commit();
        System.out.println("Updated: " + em.find(Employee.class, 1));

        // Delete
        em.getTransaction().begin();
        em.remove(foundEmp);
        em.getTransaction().commit();
        System.out.println("Deleted: " + em.find(Employee.class, 1));

        em.close();
        emf.close();
    }
}
